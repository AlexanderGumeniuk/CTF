{% extends "base_competition.html" %}
{% block content %}

<div class="container">
    <h1>–ò–Ω—Ü–∏–¥–µ–Ω—Ç—ã –≤ —Å–æ—Ä–µ–≤–Ω–æ–≤–∞–Ω–∏–∏: {{ competition.title }}</h1>

    <!-- –§–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É -->
    <div class="tabs mb-3">
        <a href="{{ url_for('user_competition_incidents', competition_id=competition.id, status='all') }}"
           class="tab-link {% if status == 'all' %}active{% endif %}">
            <span class="tab-icon all"></span> –í—Å–µ
        </a>
        <a href="{{ url_for('user_competition_incidents', competition_id=competition.id, status='pending') }}"
           class="tab-link {% if status == 'pending' %}active{% endif %}">
            <span class="tab-icon pending"></span> –û–∂–∏–¥–∞—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏
        </a>
        <a href="{{ url_for('user_competition_incidents', competition_id=competition.id, status='approved') }}"
           class="tab-link {% if status == 'approved' %}active{% endif %}">
            <span class="tab-icon solved"></span> –û–¥–æ–±—Ä–µ–Ω—ã
        </a>
        <a href="{{ url_for('user_competition_incidents', competition_id=competition.id, status='rejected') }}"
           class="tab-link {% if status == 'rejected' %}active{% endif %}">
            <span class="tab-icon unsolved"></span> –û—Ç–∫–ª–æ–Ω–µ–Ω—ã
        </a>
        <a href="{{ url_for('user_competition_incidents', competition_id=competition.id, status='needs_revision') }}"
           class="tab-link {% if status == 'needs_revision' %}active{% endif %}">
            <span class="tab-icon needs_revision"></span> –ù–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É
        </a>
    </div>

    <!-- –¢–∞–±–ª–∏—Ü–∞ —Å –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞–º–∏ -->
    <div class="list-group">
        {% for incident in incidents %}
        <div class="list-group-item">
            <div class="challenge-header">
                <div class="status-icon">
                    {% if incident.status == 'pending' %}
                        ‚è≥
                    {% elif incident.status == 'approved' %}
                        ‚úîÔ∏è
                    {% elif incident.status == 'rejected' %}
                        ‚ùå
                    {% elif incident.status == 'needs_revision' %}
                        üîÑ
                    {% endif %}
                </div>
                <div class="challenge-title">
                    <h3>{{ incident.title }}</h3>
                    <small>ID: {{ incident.id }}</small>
                </div>
                <div class="challenge-points">
                    <p>{{ incident.start_time.strftime('%Y-%m-%d %H:%M') }}</p>
                    <a href="{{ url_for('view_incident', competition_id=competition.id, incident_id=incident.id) }}"
                       class="btn btn-primary btn-sm">
                        –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                    </a>
                </div>
            </div>
        </div>
        {% else %}
        <div class="list-group-item">
            <p class="text-center">–ò–Ω—Ü–∏–¥–µ–Ω—Ç–æ–≤ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.</p>
        </div>
        {% endfor %}
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ –∏–Ω—Ü–∏–¥–µ–Ω—Ç–∞ -->
    <div class="mt-3">
        <a href="{{ url_for('create_incident', competition_id=competition.id) }}" class="back-button">
            –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∏–Ω—Ü–∏–¥–µ–Ω—Ç
        </a>
    </div>
</div>

{% endblock %}
